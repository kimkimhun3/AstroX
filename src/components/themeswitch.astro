---
import { Icon } from "astro-icon";
import { ThemeSwitch } from "astro-color-scheme";
---

<ThemeSwitch strategy="select" defaultTheme="light">
  <div class="inline-flex items-center">
    <Icon class="w-4 h-4 mr-2" name="heroicons-outline:sun" />
    <select name="themeSwitch" id="themeSwitch">
      <option value="system">System</option>
      <option value="dark">Dark</option>
      <option value="light">Light</option>
    </select>
  </div>
</ThemeSwitch>


<script type="module">
  document.addEventListener("DOMContentLoaded", function(event) {
    const themeSwitch = document.getElementById('themeSwitch');
    
    themeSwitch.addEventListener('change', function() {
      const selectedTheme = themeSwitch.value;
      document.documentElement.setAttribute('data-theme', selectedTheme);
      const event = new Event('themeChange');
      document.dispatchEvent(event);
    });
  });
</script>